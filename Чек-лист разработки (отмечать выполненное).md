| №      | Задача                                             | Суть и действия                                              | Почему важно / лёгкость                                      |
| ------ | -------------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **1**  | **Включить GitHub Issues как трекер**              | - В настройках включить Issues.- Добавить две шаблонные категории: *bug report* и *feature request* (файлы `.github/ISSUE_TEMPLATE`). | 1 клик → фиксирует все задачи в одном месте.                 |
| **2**  | **Практика релизов (Git tags + Releases)**         | - При каждом «стабильном» наборе фич ставить тег `vX.Y`.- CHANGELOG уже готов — копировать его текст в Release Notes.- Скрипт `update-bot.sh` доработать: pull **последний тег**, а не «main». | Легко внедрить; сразу даёт надёжный продакшн-деплой.         |
| **3**  | **Добавить описание и теги в GitHub "About"**      | Заполнить короткое RU + EN описание и темы: `telegram-bot`, `openai`, `google-sheets`, `productivity`. | 30 секунд — улучшает видимость.                              |
| **4**  | **README-badge покрытия тестов**                   | - Зарегистрироваться в Codecov или выкладывать `coverage.xml` как artifact.- Добавить бейдж в README. | Минуты; мотивирует держать 80 %+.                            |
| **5**  | **Расширить `CONTRIBUTING.md` + PR-шаблон**        | - *Contributing* дописать: установка venv, `pre-commit install`, style guide, как запускать тесты.- `.github/PULL_REQUEST_TEMPLATE.md` с чек-листом (CI passed, Conventional Commits и т. д.). | Очень лёгкая правка, повышает качество внешних PR.           |
| **6**  | **README EN-версия + перевод основных разделов**   | Сделать `README_EN.md` (или `README.md` двуязычным) с тем же содержимым. В RU версию добавить emoji, якоря, улучшить формат. | Небольшой перевод → открываемся миру.                        |
| **7**  | **Dependabot — проверить / докрутить**             | Dependabot уже активен ✅ (см. скрин). Проверь файл `.github/dependabot.yml`: - включить группировку «security-updates»;- выставить авто-rebase;- разрешить автоматический merge патчевых версий dev-зависимостей. | Ускорит обновления библиотек.                                |
| **8**  | **Оптимизация запросов к LLM**                     | Цель: повысить качество и снизить $:- внедрить системный промпт «role» один раз, reuse conversation_id;- кешировать ответы на повторяющиеся промпты (lru_cache / SQLite);- экспериментировать с `response_format="json_object"` & дробной температурой;- параллелизировать запросы только при необходимости (batch-mode). | Лёгкие изменения конфигурации + небольшой код.               |
| **9**  | **Метрика и Rate Limiter**                         | - Реализовать in-memory токен-бакет (per-user)- Экспорт Prometheus метрик: `openai_calls_total`, `sheets_reads_total`, `goal_count_gauge`. | Защита от дергания и основа мониторинга.                     |
| **10** | **Кэш данных Google Sheets (lru_cache)**           | Обернуть чтение часто запрашиваемых диапазонов (цель, сегодняшняя задача, статус) декоратором `@lru_cache(maxsize=128)` и сбрасывать кэш при записи. | Просто, а задержки падают ×3-×5.                             |
| **11** | **Шаблон листов для нескольких целей**             | *Новая схема:**Лист 0** `Goals_Index` — таблица: ☐ №        | ☐ Название                                                   |
| **12** | **Команды / логика «несколько целей»**             | - `/setgoal` создаёт запись в `Goals_Index` (+лист Plan).- `/goals` выводит нумерованный список.- `/switchgoal N` делает цель активной.- `/resetgoal N` удаляет цель; `/resetall` как сейчас.- Планировщик хранит `user_id+goal_id` в имени job, чтобы не коллизировать. | Ключевая бизнес-фича, нужна для 10 целей × 20 пользователей. |
| **13** | **Миграция существующих данных**                   | Скрипт: переименовать старые листы пользователя → `Goals_Index` (+запись цель №1) и `Goal1_Plan`. Авто-детект, один раз при запуске новой версии. | Не потерять текущие цели.                                    |
| **14** | **Refactor: StorageInterface + LLMInterface (DI)** | Вынести абстракции, подключить `dependency-injector`:- `SheetsStorage` (prod) + `DummyStorage` (tests).- `OpenAIClient` (prod) + `MockLLM` (tests). | Упростит тестирование и возможность смены БД в будущем.      |
| **15** | **Tenacity-retry декораторы**                      | Унифицировать все I/O вызовы (`Sheets`, `OpenAI`) под единый декоратор с back-off и джиттером. | 10 строк кода, а сервис держится надёжнее.                   |
| **16** | **Batch-update Google Sheets**                     | Для массовых операций (создание нескольких строк плана) использовать `batch_update` → один HTTP-запрос. | Снижает лимиты API и время.                                  |
| **17** | **Расширенное логирование + Alerter**              | - `structlog` → JSON-формат.- Sentry: уровни breadcrumbs, пометка `user_id`, `goal_id`.- Alert в Sentry, если job `daily_task` не отрабатывала > 24 ч. | Улучшает поддержку продакшна.                                |
| **18** | **Docker CI publish on Release**                   | В workflow: на тег → собери `ghcr.io/bivlked/target-assistant-bot:vX.Y`.Добавить шаг `docker push`. | Упрощает развёртывание.                                      |
| **19** | **Python 3.12/3.13 - испытания**                   | Обновить матрицу CI: `3.10 3.11 3.12`. Позже, при EOL 3.10, поднять минималку. | Подготовка к будущему.                                       |
| **20** | **Исправить критическую ошибку в period_parser** | Добавить проверки на пустые `choices` и `content` + unit-тест. | Ошибка могла приводить к падению бота при нестабильном ответе OpenAI. |
| **21** | **Добавить mypy в CI** | В existing workflow `ci.yml` добавить шаг `mypy . --pretty --strict-optional False` (или отдельный job), пока без `--strict` (не прерывать сборку). | Контроль типов на CI предотвратит регрессии. |
| **22** | **Починить падающие GitHub Actions** | tests.yml: добавить system deps / колёса cryptography; docker.yml: запускать только для main в оригинальном репо. | Делает CI «зелёным». |



### Чек-лист (отмечать выполненное)

- [x] Первичный аудит кода (Ruff + Pytest + начальный mypy) – 04-2025
- [x] Issues и шаблоны
- [x] About-описание и topics (внесены в настройки GitHub)
- [x] Бейдж покрытия Codecov
- [x] CONTRIBUTING.md обновлен, PR-template существует
- [x] README EN
- [x] Dependabot конфиг
- [x] Оптимизация запросов к LLM (системный промпт, JSON mode)
- [x] Rate Limiter и метрики Prometheus (ветка смерджена)
- [x] Кэш Google Sheets (LRU, TTL, invalidate on write)
- [ ] Схема листов Multi-Goal
- [ ] Реализация Multi-Goal команд
- [ ] Миграция старых данных
- [x] DI рефакторинг (StorageInterface, LLMInterface, async versions, GoalManager updated)
- [ ] Tenacity retry
- [ ] Batch-update Sheets
- [ ] Расширенное логирование/алерты
- [ ] Docker publish
- [ ] Тест Python 3.12/3.13

### Новые задачи

| № | Задача | Суть и действия | Почему важно |
|---|---------|-----------------|--------------|
| **20** | **Исправить критическую ошибку в period_parser** | Добавить проверки на пустые `choices` и `content` + unit-тест. | Ошибка могла приводить к падению бота при нестабильном ответе OpenAI. |
| **21** | **Добавить mypy в CI** | В existing workflow `ci.yml` добавить шаг `mypy . --pretty --strict-optional False` (или отдельный job), пока без `--strict` (не прерывать сборку). | Контроль типов на CI предотвратит регрессии. |
| **22** | **Починить падающие GitHub Actions** | tests.yml: добавить system deps / колёса cryptography; docker.yml: запускать только для main в оригинальном репо. | Делает CI «зелёным». |

### Выполнено из новых задач

- [x] #20 – фикс и unit-тест `period_parser`
- [x] #22 – GitHub Actions проходят «зелёными»
- [x] mypy в CI сделан обязательным
- [x] Задачи #10 (Кэш) и #14 (DI рефакторинг) выполнены.